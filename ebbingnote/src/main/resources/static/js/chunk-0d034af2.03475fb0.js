(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d034af2"],{"5ced":function(t,e,o){},b0c0:function(t,e,o){var n=o("83ab"),a=o("9bf2").f,i=Function.prototype,r=i.toString,l=/^\s*function ([^ (]*)/,s="name";!n||s in i||a(i,s,{configurable:!0,get:function(){try{return r.call(this).match(l)[1]}catch(t){return""}}})},bb51:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"home"}},[o("div",{staticClass:"icon",staticStyle:{display:"flex"}},[o("el-aside",{attrs:{width:"200px"}},[o("span",{on:{click:function(e){t.dialogFormVisible=!0}}},[o("i",{staticClass:"el-icon-circle-plus-outline"}),o("el-button",{attrs:{type:"text"}},[t._v("目录")])],1),o("span",{on:{click:function(e){t.dialogFormVisible=!0}}},[o("i",{staticClass:"el-icon-circle-plus-outline"}),o("el-button",{attrs:{type:"text"}},[t._v("笔记")])],1)]),o("el-header",{staticStyle:{"text-align":"right","font-size":"12px","flex-grow":"1"}},[o("h2",[t._v("EbbingNote")]),o("el-dropdown",{attrs:{trigger:"click"}},[o("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{nativeOn:{click:function(e){return t.logout(e)}}},[t._v("退出登录")])],1)],1),o("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.userAccountName))])],1)],1),o("el-dialog",{attrs:{title:"新建目录",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.categoryForm}},[o("el-form-item",{attrs:{label:"名称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.categoryForm.name,callback:function(e){t.$set(t.categoryForm,"name",e)},expression:"categoryForm.name"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.confirmCategory}},[t._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"新建笔记",visible:t.dialogFormVisible1,top:"10vh"},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[o("el-form",{attrs:{model:t.noteForm}},[o("el-form-item",{attrs:{label:"目录","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择目录"},model:{value:t.noteForm.categoryId,callback:function(e){t.$set(t.noteForm,"categoryId",e)},expression:"noteForm.categoryId"}},[t._l(t.categories,(function(e){return[-1!=e.id?o("el-option",{key:e.id,attrs:{label:e.categoryName,value:e.id}}):t._e()]}))],2)],1),o("el-form-item",{attrs:{label:"名称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.noteForm.noteName,callback:function(e){t.$set(t.noteForm,"noteName",e)},expression:"noteForm.noteName"}})],1),o("el-form-item",{attrs:{label:"内容","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.noteForm.noteContent,callback:function(e){t.$set(t.noteForm,"noteContent",e)},expression:"noteForm.noteContent"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.confirmNote}},[t._v("确 定")])],1)],1),o("el-container",{staticClass:"container"},[o("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[o("el-menu",t._l(t.categories,(function(e){return o("el-submenu",{key:e.id,attrs:{index:e.id.toString()},nativeOn:{contextmenu:function(o){return o.preventDefault(),t.deleteCategory(e)}}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-message"}),t._v(t._s(e.categoryName))]),o("el-menu-item-group",t._l(e.notes,(function(e){return o("el-menu-item",{key:e.id,on:{click:function(o){return t.detail(e.id)}},nativeOn:{contextmenu:function(o){return o.preventDefault(),t.deleteNote(e.id)}}},[t._v(t._s(e.title)+" ")])})),1)],2)})),1)],1),o("el-container",{staticStyle:{width:"650px",border:"1px solid #eee"}},[o("el-main",{staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(t.content)+" ")])],1)],1)],1)},a=[],i=(o("b0c0"),o("bc3a")),r=o.n(i),l={data:function(){return{userAccountName:"",userAccountId:this.$route.params.id,categories:[],currentNoteId:null,content:"",dialogFormVisible:!1,dialogFormVisible1:!1,formLabelWidth:"70px",categoryForm:{name:""},noteForm:{categoryId:"",noteName:"",noteContent:""}}},mounted:function(){var t=this,e="useraccount/getCurrentUser",o={data:this.userAccountId};r.a.post(e,o).then((function(e){e&&e.data&&e.data.data&&(t.userAccountName=e.data.data.userName)})),this.listCategory()},methods:{listCategory:function(){var t=this,e="category/list",o={data:this.userAccountId};r.a.post(e,o).then((function(e){var o=e.data;if(o&&null!=o.data){for(var n=[],a=o.data,i=0;i<a.length;i++){var r=new Array,l=a[i].documentList;if(null!=l&&l.length>0)for(var s=0;s<l.length;s++){var c={id:l[s].id,title:l[s].title,status:l[s].status,createdDate:l[s].createdDate};r.push(c)}var d={id:a[i].id,categoryName:a[i].categoryName,notes:r};n.push(d)}t.categories=n}})).catch((function(t){console.log(t)}))},confirmCategory:function(){var t=this,e="category/add",o={userAccountId:this.userAccountId,categoryName:this.categoryForm.name};r.a.post(e,o).then((function(e){e.data.data?(t.$notify({message:"创建成功",type:"success"}),t.listCategory(),t.dialogFormVisible=!1):t.$notify.error({message:"创建失败"})}))},confirmNote:function(){var t=this,e="document/add",o={categoryId:this.noteForm.categoryId,title:this.noteForm.noteName,content:this.noteForm.noteContent};r.a.post(e,o).then((function(e){e.data.data?(t.$notify({message:"创建成功",type:"success"}),t.listCategory(),t.detail(e.data.data.id),t.dialogFormVisible1=!1):t.$notify.error({message:"创建失败"})}))},detail:function(t){var e=this,o="document/detail",n={data:t};r.a.post(o,n).then((function(o){e.currentNoteId=t,e.content=o.data.data.content}))},deleteCategory:function(t){var e=this;if(!(t.notes&&t.notes.length>0)){var o="category/delete",n={id:t.id};this.$confirm("确认删除吗?","提示",{}).then((function(){r.a.post(o,n).then((function(t){t&&t.data&&t.data.data&&(e.listCategory(),e.$notify({message:"删除成功",type:"success"}))}))}))}},deleteNote:function(t){var e=this,o="document/delete",n={id:t};this.$confirm("确认删除吗?","提示",{}).then((function(){r.a.post(o,n).then((function(o){o&&o.data&&o.data.data&&(e.currentNoteId===t&&(e.content=null),e.listCategory(),e.$notify({message:"删除成功",type:"success"}))}))}))},logout:function(){var t=this;this.$confirm("确认退出吗?","提示",{}).then((function(){sessionStorage.removeItem("user"),t.$router.push("/")})).catch((function(){}))}}},s=l,c=(o("cccb"),o("2877")),d=Object(c["a"])(s,n,a,!1,null,null,null);e["default"]=d.exports},cccb:function(t,e,o){"use strict";var n=o("5ced"),a=o.n(n);a.a}}]);
//# sourceMappingURL=chunk-0d034af2.03475fb0.js.map